@model Project.Models.CallHistory
@{
    ViewBag.Title = "Add Or Update Call History";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@Html.AntiForgeryToken()
<div class="col-sm-12">
    <h2>Create New Request</h2>
    <div class="pmd-card pmd-z-depth">
        <div class="pmd-card-body" style="padding-bottom:40px;">
            <h2 style="color: #ffffff; font-family: 'Roboto', sans-serif; font-size: 1em; background: #6dad78; padding: 10px;">Call From : </h2>
            <div class="row">

                <div class="col-lg-12">
                    <div class="group-fields clearfix row">
                        @Html.Hidden("CallHistoryID")
                        <div class="form-group col-sm-4">
                            <div>
                                @Html.Label("Caller Name", null, new { @class = "control-label col-md-0", Style = "float:left" })
                                <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                            </div>
                            <div style="clear:both"> </div>
                            <div class="col-md-12" style="padding-left: 0px;">
                                @Html.TextBox("CallerName", Model.CallerName, new { @class = "form-control input-sm col-sm-11", @placeholder = "Caller Name" })
                            </div>
                        </div>
                        <div class="form-group col-sm-4">
                            <div>
                                @Html.Label("Caller Phone", null, new { @class = "control-label col-md-0", Style = "float:left" })
                                <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                            </div>
                            <div style="clear:both"> </div>
                            <div class="col-md-12" style="padding-left: 0px;">
                                @Html.TextBox("CallerPhone", Model.CallerPhone, new { @class = "form-control input-sm col-sm-11", @placeholder = "Caller Phone" })
                            </div>
                        </div>
                        <div class="form-group col-sm-4">
                            <div>
                                @Html.Label("Caller Email", null, new { @class = "control-label col-md-0", Style = "float:left" })
                                <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                            </div>
                            <div style="clear:both"> </div>
                            <div class="col-md-12" style="padding-left: 0px;">
                                @Html.TextBox("CallerEmail", Model.CallerEmail, new { @class = "form-control input-sm col-sm-11", @placeholder = "Caller Email" })
                            </div>
                        </div>
                        <div class="form-group col-sm-6">
                            <div>
                                @Html.Label("Caller Address", null, new { @class = "control-label col-md-0", Style = "float:left" })
                                <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                            </div>
                            <div style="clear:both"> </div>
                            <div class="col-md-12" style="padding-left: 0px;">
                                @Html.TextBox("CallerAddress", null, new { @class = "form-control input-sm col-sm-11", @placeholder = "Caller Address" })
                            </div>
                        </div>
                        <div class="form-group col-sm-6">
                            <div>
                                @Html.Label("Country", null, new { @class = "control-label col-md-0", Style = "float:left" })
                                <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                            </div>
                            <div style="clear:both"> </div>
                            <div class="col-md-12" style="padding-left: 0px;">
                                @Html.DropDownList("CountryID", ViewBag.Country as SelectList, "Select Country", new { @class = "form-control input-sm col-sm-11", @placeholder = "Select Country" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h2 style="color: #ffffff; font-family: 'Roboto', sans-serif; font-size: 1em; background: #6e93ca; padding: 10px;">Call To : </h2>
            <div class="row">

                <div class="col-lg-12">
                    <div id="addy" class="group-fields clearfix row">
                        <div class="form-group col-sm-6">
                            <div>
                                @Html.Label("Company", null, new { @class = "control-label col-md-0", Style = "float:left" })
                                <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                            </div>
                            <div style="clear:both"> </div>
                            <div class="col-md-12" style="padding-left: 0px;">

                                @Html.DropDownList("CompanyID", ViewBag.Company as SelectList, "Select Company", new { @class = "form-control input-sm col-sm-11", @placeholder = "Select Company" })
                            </div>
                        </div>
                        <div class="form-group col-sm-6">
                            <div>
                                @Html.Label("Company Staff", new { @class = "control-label col-md-0", Style = "float:left" })
                                <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                            </div>
                            <div style="clear:both"> </div>
                            <div class="col-md-12" style="padding-left: 0px;">
                                @Html.DropDownList("CompanyStaffID", @ViewBag.StaffListt == null ? Enumerable.Empty<SelectListItem>() : ViewBag.StaffListt as SelectList, "Select Company Staff", new { @class = "form-control   col-sm-11", @placeholder = " Staff" })
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h2 style="color: #ffffff; font-family: 'Roboto', sans-serif; font-size: 1em; background: grey; padding: 10px;">Regarding :</h2>

            <div class="row">
                <div class="form-group col-sm-6">
                    <div>
                        @Html.Label("Subject", null, new { @class = "control-label col-md-0", Style = "float:left" })
                        <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                    </div>
                    <div style="clear:both"> </div>
                    <div class="col-md-12" style="padding-left: 0px;">
                        @Html.TextBox("Subect", Model.Subject, new { @class = "form-control input-sm col-sm-11", @placeholder = "Subject" })
                    </div>
                </div>

                <div class="form-group col-sm-6">
                    <div>
                        @Html.Label("Call Category", new { @class = "control-label col-md-0", Style = "float:left" })
                        <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                    </div>
                    <div style="clear:both"> </div>
                    <div class="col-md-12" style="padding-left: 0px;">
                        @Html.DropDownList("CallCategoryID", ViewBag.CallCategory as SelectList, "Select Call Category", new { @class = "form-control input-sm col-sm-11", @placeholder = "Select Call Category" })
                    </div>
                </div>
                <div class="form-group col-sm-12">
                    <div>
                        @Html.Label("Description", null, new { @class = "control-label col-md-0", Style = "float:left" })
                        <span class="required_field col-md-0" style="padding-left:5px"> *</span>
                    </div>
                    <div style="clear:both"> </div>
                    <div class="col-md-12" style="padding-left: 0px;">
                        @Html.TextArea("Description", Model.Description, new { @class = "form-control input-sm col-sm-11", @placeholder = "Description" })
                    </div>
                </div>
            </div>



            <div class="row">
                <div class="col-sm-12">
                    <div class="pmd-card-actions">
                        <a href="" id="SendCallTransfer" class="btn pmd-ripple-effect btn-primary btn-block" style="margin-right: 10px; max-width: 200px; margin-top: 10px;">Send Transfer Call</a>
                    </div>
                </div>
            </div>
            @*<div class="row">
                    <div class="col-sm-12">
                        <div class="pmd-card-actions">
                            <a href="#" type="submit" id="SendCallTransfer" class="btn  btn-primary btn-block" style="margin-right: 10px; max-width: 200px; margin-top: 10px;" value="Send Call Transfer" />
                        </div>
                    </div>
                </div>*@



        </div>
    </div>
</div>
<script src="~/Scripts/CustomScripts/CallHistoryManager.js"></script>
<script>
    $(document).ready(function () {

        $("#CompanyID").change(function () {
            debugger;
            var CID = $(this).val();
            $.ajax({
                type: "POST",
                url: "/CallHistory/GetStaffList?CompanyID=" + CID,
                contentType: "html",
                success: function (data) {
                    debugger;
                    $("#CompanyStaffID").empty();
                    $("#CompanyStaffID").append(data);
                }
            });
        });

        $("#SendCallTransfer").click(function (e) {
            e.preventDefault();
            if (CallHistoryManager.CreateValidation() === true) {
                CallHistoryManager.InsertCallHistory();
            }
        });


    });
</script>